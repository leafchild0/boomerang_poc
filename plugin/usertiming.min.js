!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.UserTiming){var a={complete:!1,initialized:!1,supported:!1,options:{from:0,window:BOOMR.window},getUserTiming:function(){var b=this.findUserTimingForFrame(a.options.window);a.options.from&&(b=b.filter(function(b){return b.startTime+b.duration>=a.options.from}));var c=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(void 0===c){if(0===b.length)return null;for(var d={},e=0,f=b.length;e<f;e++){var g=b[e];d[g.entryType]=d[g.entryType]||{};"mark"===g.entryType?d[g.entryType][g.name]=g.startTime:"measure"===g.entryType&&(d[g.entryType][g.name]=g.duration)}return JSON.stringify(d)}var h,d;h=c.compressUserTiming(b);return c.compressForUri(h)},addEntriesToBeacon:function(){var a,b=BOOMR.hrNow();if(!this.complete){BOOMR.removeVar("usertiming");a=this.getUserTiming();a&&BOOMR.addVar({usertiming:a});this.options.from=b;this.complete=!0}},findUserTimingForFrame:function(a){var b;if(!a)return[];try{a.location&&a.location.href;if(!("performance"in a&&a.performance&&a.performance.getEntriesByType))return b;b=a.performance.getEntriesByType("mark");b=b.concat(a.performance.getEntriesByType("measure"))}catch(c){return b}return b},clearMetrics:function(a){a.hasOwnProperty("usertiming")&&BOOMR.removeVar("usertiming");this.complete=!1},subscribe:function(){BOOMR.subscribe("before_beacon",this.addEntriesToBeacon,null,this);BOOMR.subscribe("beacon",this.clearMetrics,null,this)},pageReady:function(){this.checkSupport()&&this.subscribe()},checkSupport:function(){if(this.supported)return!0;var a=BOOMR.getPerformance();if(a&&"function"==typeof a.getEntriesByType){var b=a.getEntriesByType("mark"),c=a.getEntriesByType("measure");if(BOOMR.utils.isArray(b)&&BOOMR.utils.isArray(c)){BOOMR.info("Client supports UserTiming API","usertiming");this.supported=!0;return!0}}return!1}};BOOMR.plugins.UserTiming={init:function(b){if(a.initialized)return this;a.checkSupport()?a.subscribe():BOOMR.subscribe("page_ready",a.pageReady,null,a);a.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return a.initialized&&a.supported}}}}();
//# sourceMappingURL=usertiming.min.js.map